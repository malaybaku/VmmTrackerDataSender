# テストデータ

このディレクトリには、開発・デバッグ用の顔トラッキングテスト動画を配置します。

## 利用可能なファイル

### sample.mp4 ✅

- **用途**: デバッグ・開発時に使用可能
- **特徴**:
  - **顔を隠している時間帯が含まれる**
  - トラッキングロス（顔が検出できない状態）時の動作確認に使用可能
  - 将来的にトラッキングロス時の挙動について追加実装の予定
- **フォーマット**: MP4
- **状態**: 利用可能

**注意**: このファイルは開発・テスト目的で使用してください。

---

## 目的

- MediaPipe Face Landmarkerの動作確認
- カメラなしでの開発・デバッグ
- 再現性の高いテストケース作成
- BlendShapeや頭部姿勢の値の検証
- **トラッキングロス時の動作検証**

## 動画ファイルの要件

### 推奨フォーマット

- **形式**: MP4 (H.264コーデック)
- **解像度**: 720p (1280x720) 以上推奨
- **フレームレート**: 30fps
- **時間**: 5〜30秒程度
- **内容**: 正面からの顔が映っている映像

### ファイル名の例

```
sample-face.mp4          # 基本的な顔のテスト動画
sample-face-movement.mp4# 頭を動かすテスト動画
sample-face-blink.mp4    # 瞬きテスト動画
sample-face-smile.mp4    # 表情変化テスト動画
```

## 動画ファイルの取得方法

### オプション1: 自分で撮影

1. スマートフォンまたはWebカメラで自分の顔を5〜30秒撮影
2. 以下のような動きを含めると良い:
   - 正面を向いた静止状態
   - 頭を左右・上下に動かす
   - 瞬きする
   - 笑顔などの表情変化
3. 動画をこのディレクトリに配置

### オプション2: サンプル動画の使用

著作権フリーの顔動画を使用する場合:
- [Pexels](https://www.pexels.com/search/videos/face/) - フリー動画素材
- [Pixabay](https://pixabay.com/videos/search/face/) - フリー動画素材

**注意**: ダウンロードした動画はこのディレクトリに配置してください。

### オプション3: ブラウザで録画

1. Web実装のカメラ機能を使用
2. ブラウザの開発者ツールでMediaRecorder APIを使用して録画
3. 録画した動画を保存

## gitignore設定

このディレクトリの動画ファイル（`*.mp4`, `*.webm`, `*.mov`, `*.avi`）は `.gitignore` に含まれており、Gitリポジトリにコミットされません。

**理由:**
- プライバシー保護（顔が映っているため）
- ファイルサイズが大きい
- 個人ごとに異なるテストデータを使用する前提

## Web実装での使用方法

Web実装では以下の3つのソースから選択できます:

1. **カメラ**: リアルタイムのカメラ映像
2. **動画ファイル**: ユーザーがファイル選択ダイアログで選択
3. **テストデータ**: `test-data/sample-face.mp4` を直接読み込み（開発用）

## トラブルシューティング

### MediaPipeで顔が検出されない場合

- 顔が正面を向いているか確認
- 照明が十分か確認
- 解像度が低すぎないか確認（最低480p推奨）
- 複数人が映っていないか確認（1人のみを想定）

### ブラウザで動画が再生できない場合

- コーデックの互換性を確認（H.264が最も互換性が高い）
- ファイルパスが正しいか確認
- ブラウザのコンソールでエラーメッセージを確認

## 参考: FFmpegでの動画変換

動画フォーマットを変換したい場合:

```bash
# MP4に変換（H.264, 720p, 30fps）
ffmpeg -i input.mov -vcodec libx264 -vf scale=1280:720 -r 30 output.mp4

# ファイルサイズを削減
ffmpeg -i input.mp4 -vcodec libx264 -crf 23 -preset medium output.mp4
```

## 注意事項

- **プライバシー**: 他人の顔が映った動画をこのディレクトリに配置しないでください
- **著作権**: 著作権フリーまたは自分で撮影した動画のみを使用してください
- **配布禁止**: このディレクトリの動画ファイルを第三者と共有しないでください
